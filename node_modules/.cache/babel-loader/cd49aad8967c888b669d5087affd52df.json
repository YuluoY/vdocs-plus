{"remainingRequest":"D:\\桌面\\vdocs-plus\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\vdocs-plus\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\桌面\\vdocs-plus\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面\\vdocs-plus\\src\\components\\h-article-sidebar.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\桌面\\vdocs-plus\\src\\components\\h-article-sidebar.vue","mtime":1661280552266},{"path":"D:\\桌面\\vdocs-plus\\babel.config.js","mtime":1658807783766},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661267353134},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\babel-loader\\lib\\index.js","mtime":1661267356503},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661267353134},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\vue-loader\\lib\\index.js","mtime":1661267357130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBhZGRDbGFzcywgZGVsZXRlQ2xhc3MsIGlzQ2xhc3NuYW1lIH0gZnJvbSAiQC91dGlscy9kb20iOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhBcnRpY2xlU2lkZWJhciIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlczogW10sCiAgICAgIGFydGljbGVTaWRlYmFyOiBbXSwKICAgICAgYWN0aXZlU3RlcDogMCwKICAgICAgc3BlZWQ6IDEKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBtb3ZlOiBmdW5jdGlvbiBtb3ZlKGV2ZW50KSB7CiAgICAgIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgPT09ICdBJykgewogICAgICAgIHRoaXMuanVtcChldmVudC50YXJnZXQuaW5uZXJUZXh0KTsKICAgICAgICB0aGlzLnVwZGF0ZVRpdGxlQWN0aXZlKGV2ZW50LnRhcmdldC5wYXJlbnROb2RlKTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZVRpdGxlQWN0aXZlOiBmdW5jdGlvbiB1cGRhdGVUaXRsZUFjdGl2ZShub2RlKSB7CiAgICAgIHZhciBUSVRMRUFDVElWRSA9ICd0aXRsZS1hY3RpdmUnOwoKICAgICAgaWYgKCF0aGlzLnRpdGxlcy5sZW5ndGgpIHsKICAgICAgICB2YXIgc2lkZWJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NpZGViYXItd3JhcHBlcicpWzBdOwogICAgICAgIHRoaXMudGl0bGVzID0gQXJyYXkuZnJvbShzaWRlYmFyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdkaXYnKSk7CiAgICAgIH0KCiAgICAgIHRoaXMudGl0bGVzLmZvckVhY2goZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gaXNDbGFzc25hbWUobiwgVElUTEVBQ1RJVkUpICYmIGRlbGV0ZUNsYXNzKG4sIFRJVExFQUNUSVZFKTsKICAgICAgfSk7CiAgICAgIGFkZENsYXNzKG5vZGUsIFRJVExFQUNUSVZFKTsKICAgIH0sCiAgICBqdW1wOiBmdW5jdGlvbiBqdW1wKGlkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdGFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FuY2hvci0nICsgaWQpOyAvLyDojrflj5bpnIDopoHmu5rliqjnmoTot53nprsKCiAgICAgIHZhciBoZWFkZXIgPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luOyAvLyBodHRwOi8vbG9jYWxob3N0LzgwODAKCiAgICAgIHZhciBwYXRoID0gd2luZG93LmxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKDEpLnNwbGl0KCcjJylbMF07IC8vIOi3r+eUsei3r+W+hAoKICAgICAgdmFyIGFuY2hvciA9IHRhci5wYXJlbnROb2RlLmlkOyAvLyDplJrngrnlkI3np7AKCiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gIiIuY29uY2F0KGhlYWRlciwgIi8jIikuY29uY2F0KHBhdGgsICIjIikuY29uY2F0KGFuY2hvcik7CiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICAgIHZhciBnYXAgPSBNYXRoLmFicyh0YXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tKSAvIDI1NTsgLy8gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkg5Y+v5Lul5om+5Yiw5b2T5YmN5YWD57Sg5L2N5LqO5rWP6KeI5Zmo6KeG5Y+j55qE57ud5a+55a6a5L2N6Led56a7CgogICAgICB0YXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tIDwgMCAmJiAoZ2FwID0gLWdhcCk7CiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICAgIGNvbnNvbGUudGltZSgn5paH56ug5a+86Iiq6Lez6L2s6ICX5pe277yaJyk7CiAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoXykgewogICAgICAgIC8vIOWHj+WOu+mhtumDqOWvvOiIquagj+mrmOW6pjEwMAogICAgICAgIHZhciB0b3RhbCA9IHRhci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gLSAxMDA7CgogICAgICAgIGlmIChnYXAgPCAwICYmIHRvdGFsID49IDAgfHwgZ2FwID4gMCAmJiB0b3RhbCA8PSAwKSB7CiAgICAgICAgICBjbGVhckludGVydmFsKF90aGlzLnRpbWVyKTsKICAgICAgICAgIGNvbnNvbGUudGltZUVuZCgn5paH56ug5a+86Iiq6Lez6L2s6ICX5pe277yaJyk7CiAgICAgICAgfQoKICAgICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvKDAsIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICsgZ2FwKTsKICAgICAgfSwgdGhpcy5zcGVlZCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpczIuYXJ0aWNsZVNpZGViYXIgPSAkaFV0aWxzLmFydGljbGVTaWRlYmFyOwogICAgfSk7CiAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBhcnIgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnIycpOwogICAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMykgX3RoaXMyLmp1bXAoZGVjb2RlVVJJKGFyclthcnIubGVuZ3RoIC0gMV0pKTsKICAgIH0pOwogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;AAaA;AAEA;EACAA,uBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,UADA;MAEAC,kBAFA;MAGAC,aAHA;MAIAC;IAJA;EAMA,CATA;EAUAC;IACAC,IADA,gBACAC,KADA,EACA;MACA;QACA;QACA;MACA;IACA,CANA;IAOAC,iBAPA,6BAOAC,IAPA,EAOA;MACA;;MACA;QACA;QACA;MACA;;MACA;QAAA;MAAA;MACAC;IACA,CAfA;IAgBAC,IAhBA,gBAgBAC,EAhBA,EAgBA;MAAA;;MACA,kDADA,CACA;;MAEA,oCAHA,CAGA;;MACA,2DAJA,CAIA;;MACA,+BALA,CAKA;;MACAC;MAEAC;MACA,6DATA,CAUA;;MACAC;MACAD;MACAE;MACA;QACA;QACA;;QACA;UACAF;UACAE;QACA;;QACAC;MACA,CARA,EAQA,UARA;IASA;EAvCA,CAVA;EAmDAC,OAnDA,qBAmDA;IAAA;;IACAC;MAAA;IAAA;IACA;MACA;MACA,sBACA;IACA,CAJA;EAKA;AA1DA","names":["name","data","titles","articleSidebar","activeStep","speed","methods","move","event","updateTitleActive","node","addClass","jump","id","window","clearInterval","tar","console","document","mounted","setTimeout"],"sourceRoot":"src/components","sources":["h-article-sidebar.vue"],"sourcesContent":["<template>\r\n    <div class=\"h-article-sidebar\">\r\n        <div class=\"sidebar-wrapper\" @click=\"move\">\r\n            <div class=\"list\">目录</div>\r\n            <div v-for=\"(n, i) in articleSidebar\" :key=\"i\"\r\n                 v-html=\"n.innerHTML\">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import {addClass, deleteClass, isClassname} from \"@/utils/dom\";\r\n\r\n    export default {\r\n        name: \"HArticleSidebar\",\r\n        data() {\r\n            return {\r\n                titles: [],\r\n                articleSidebar: [],\r\n                activeStep: 0,\r\n                speed: 1,\r\n            }\r\n        },\r\n        methods: {\r\n            move(event) {\r\n                if (event.target.nodeName === 'A') {\r\n                    this.jump(event.target.innerText)\r\n                    this.updateTitleActive(event.target.parentNode)\r\n                }\r\n            },\r\n            updateTitleActive(node) {\r\n                const TITLEACTIVE = 'title-active';\r\n                if (!this.titles.length) {\r\n                    const sidebar = document.getElementsByClassName('sidebar-wrapper')[0];\r\n                    this.titles = Array.from(sidebar.getElementsByTagName('div'));\r\n                }\r\n                this.titles.forEach(n => isClassname(n, TITLEACTIVE) && deleteClass(n, TITLEACTIVE))\r\n                addClass(node, TITLEACTIVE)\r\n            },\r\n            jump(id) {\r\n                let tar = document.getElementById('anchor-' + id)// 获取需要滚动的距离\r\n\r\n                const header = window.location.origin // http://localhost/8080\r\n                const path = window.location.hash.substring(1).split('#')[0] // 路由路径\r\n                const anchor = tar.parentNode.id // 锚点名称\r\n                window.location.href = `${header}/#${path}#${anchor}`\r\n\r\n                clearInterval(this.timer)\r\n                let gap = Math.abs(tar.getBoundingClientRect().bottom) / 255;\r\n                // getBoundingClientRect() 可以找到当前元素位于浏览器视口的绝对定位距离\r\n                tar.getBoundingClientRect().bottom < 0 && (gap = -gap);\r\n                clearInterval(this.timer)\r\n                console.time('文章导航跳转耗时：')\r\n                this.timer = setInterval(_ => {\r\n                    // 减去顶部导航栏高度100\r\n                    let total = tar.getBoundingClientRect().bottom - 100;\r\n                    if ((gap < 0 && total >= 0) || (gap > 0 && total <= 0)) {\r\n                        clearInterval(this.timer)\r\n                        console.timeEnd('文章导航跳转耗时：')\r\n                    }\r\n                    document.body.scrollTo(0, document.body.scrollTop + gap)\r\n                }, this.speed)\r\n            },\r\n        },\r\n        mounted() {\r\n            setTimeout(() => this.articleSidebar = $hUtils.articleSidebar)\r\n            this.$nextTick(() => {\r\n                const arr = window.location.href.split('#');\r\n                if (arr.length === 3)\r\n                    this.jump(decodeURI(arr[arr.length - 1]))\r\n            })\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n  .h-article-sidebar {\r\n    position: absolute;\r\n    width: 15em;\r\n    top: 20em;\r\n    padding: 10px 10px;\r\n    background-color: rgba(255, 255, 255, 0.5);\r\n    z-index: 99;\r\n    max-height: 400px;\r\n    overflow-y: auto;\r\n    right: 1em;\r\n  }\r\n\r\n  .h-article-sidebar2 {\r\n    position: fixed !important;\r\n    top: 3em !important;\r\n  }\r\n</style>"]}]}