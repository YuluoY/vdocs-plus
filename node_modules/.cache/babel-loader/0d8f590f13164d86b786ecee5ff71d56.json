{"remainingRequest":"D:\\桌面\\vdocs-plus\\node_modules\\babel-loader\\lib\\index.js!D:\\桌面\\vdocs-plus\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\桌面\\vdocs-plus\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面\\vdocs-plus\\src\\server\\Article\\ArticleWrite.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\桌面\\vdocs-plus\\src\\server\\Article\\ArticleWrite.vue","mtime":1660498062717},{"path":"D:\\桌面\\vdocs-plus\\babel.config.js","mtime":1658807783766},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661267353134},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\babel-loader\\lib\\index.js","mtime":1661267356503},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661267353134},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\vue-loader\\lib\\index.js","mtime":1661267357130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovXHU2ODRDXHU5NzYyL3Zkb2NzLXBsdXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiRDovXHU2ODRDXHU5NzYyL3Zkb2NzLXBsdXMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFZ1ZU1hcmtkb3duRWRpdG9yIGZyb20gIkAvcGx1Z2lucy9WdWVNYXJrZG93bkVkaXRvciI7CmltcG9ydCBIVXBsb2FkIGZyb20gIkAvc2VydmVyL2NvbXBvbmVudC9oLXVwbG9hZCI7CmltcG9ydCB7IGlzRW1wdHlPYmogfSBmcm9tICJAL3V0aWxzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBcnRpY2xlV3JpdGUiLAogIGNvbXBvbmVudHM6IHsKICAgIEhVcGxvYWQ6IEhVcGxvYWQsCiAgICBWdWVNYXJrZG93bkVkaXRvcjogVnVlTWFya2Rvd25FZGl0b3IKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RlbDogewogICAgICAgIGNhdGVnb3JpZXM6IFtdLAogICAgICAgIHZpZXdOdW06IDAsCiAgICAgICAgY29tbWVudE51bTogMCwKICAgICAgICBpbWdVcmw6ICcnCiAgICAgIH0sCiAgICAgIGNhdGVnb3JpZXM6IFtdLAogICAgICBzZWFyY2g6ICcnCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlRWRpdDogZnVuY3Rpb24gaGFuZGxlRWRpdChpbmRleCwgcm93KSB7CiAgICAgIGNvbnNvbGUubG9nKGluZGV4LCByb3cpOwogICAgfSwKICAgIGhhbmRsZURlbGV0ZTogZnVuY3Rpb24gaGFuZGxlRGVsZXRlKGluZGV4LCByb3cpIHsKICAgICAgY29uc29sZS5sb2coaW5kZXgsIHJvdyk7CiAgICB9LAogICAgc2V0SW1nVXJsOiBmdW5jdGlvbiBzZXRJbWdVcmwodXJsKSB7CiAgICAgIHRoaXMubW9kZWwuaW1nVXJsID0gdXJsOwogICAgfSwKICAgIGhhbmRsZVVwbG9hZEltYWdlOiBmdW5jdGlvbiBoYW5kbGVVcGxvYWRJbWFnZShldmVudCwgaW5zZXJ0SW1hZ2UsIGZpbGVzKSB7fSwKICAgIGhhbmRsZVNhdmU6IGZ1bmN0aW9uIGhhbmRsZVNhdmUodGV4dCwgaHRtbCkgewogICAgICB0aGlzLm1vZGVsLmNvbnRlbnQgPSB0ZXh0OwogICAgfSwKICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlcywgb3BlcmF0aW9uOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJlcyA9IG51bGw7CiAgICAgICAgICAgICAgICBvcGVyYXRpb24gPSAn5re75YqgJzsKCiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLm1vZGVsLmNvbnRlbnQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoaXNFbXB0eU9iaihfdGhpcy4kcm91dGUucXVlcnkpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJGFwaXMuYWRtaW4udXBkYXRlQXJ0aWNsZShfdGhpcy5tb2RlbCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBvcGVyYXRpb24gPSAn5pu05pawJzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRhcGlzLmFkbWluLmFkZEFydGljbGUoX3RoaXMubW9kZWwpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIGlmICghcmVzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2Uuc3VjY2VzcygiXHU2NTg3XHU3QUUwXCIiLmNvbmNhdChfdGhpcy5tb2RlbC50aXRsZSwgIlwiIikuY29uY2F0KG9wZXJhdGlvbiwgIlx1NjIxMFx1NTI5Rlx1RkYwMSIpKTsKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJHJvdXRlci5wdXNoKCdBcnRpY2xlVXBkYXRlJyk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+aSsOWGmeaWh+eroOWQjuaPkOS6pO+8gScpOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHVwZGF0ZUNhdGVnb3J5OiBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeSgpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldEFsbENhdGVnb3J5OiBmdW5jdGlvbiBnZXRBbGxDYXRlZ29yeSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgYTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi4kYXBpcy5hZG1pbi5nZXRBbGxDYXRlZ29yeSgnY2F0ZWdvcmllcycpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBhID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICBfdGhpczIuY2F0ZWdvcmllcyA9IGEuZGF0YTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRBbGxDYXRlZ29yeSgpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgIGlmICghaXNFbXB0eU9iaih0aGlzLiRyb3V0ZS5xdWVyeSkpIHsKICAgICAgdmFyIGFydGljbGUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoLWFydGljbGUtZWRpdCcpIHx8ICd7fScpOwogICAgICB0aGlzLm1vZGVsID0gX29iamVjdFNwcmVhZCh7fSwgYXJ0aWNsZSk7CiAgICAgIHRoaXMubW9kZWwuY2F0ZWdvcmllcy5sZW5ndGggPSAwOwogICAgICBhcnRpY2xlLmNhdGVzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gX3RoaXMzLm1vZGVsLmNhdGVnb3JpZXMucHVzaChpdGVtLl9pZCk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AAEA;EACAA,oBADA;EAEAC;IACAC,gBADA;IAEAC;EAFA,CAFA;EAMAC,IANA,kBAMA;IACA;MACAC;QACAC,cADA;QAEAC,UAFA;QAGAC,aAHA;QAIAC;MAJA,CADA;MAOAH,cAPA;MAQAI;IARA;EAUA,CAjBA;EAkBAC;IACAC,UADA,sBACAC,KADA,EACAC,GADA,EACA;MACAC;IACA,CAHA;IAIAC,YAJA,wBAIAH,KAJA,EAIAC,GAJA,EAIA;MACAC;IACA,CANA;IAOAE,SAPA,qBAOAC,GAPA,EAOA;MACA;IACA,CATA;IAUAC,iBAVA,6BAUAC,KAVA,EAUAC,WAVA,EAUAC,KAVA,EAUA,CAEA,CAZA;IAaAC,UAbA,sBAaAC,IAbA,EAaAC,IAbA,EAaA;MACA;IACA,CAfA;IAgBAC,QAhBA,sBAgBA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC,GADA,GACA,IADA;gBAEAC,SAFA,GAEA,IAFA;;gBAAA,KAGA,mBAHA;kBAAA;kBAAA;gBAAA;;gBAAA,IAIAC,8BAJA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAKA,4CALA;;cAAA;gBAKAF,GALA;gBAMAC;gBANA;gBAAA;;cAAA;gBAAA;gBAAA,OAQA,yCARA;;cAAA;gBAQAD,GARA;;cAAA;gBAAA,KAUAA,GAVA;kBAAA;kBAAA;gBAAA;;gBAWA;;gBAXA;gBAAA,OAYA,mCAZA;;cAAA;gBAAA;gBAAA;;cAAA;gBAeA;;cAfA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAiBA,CAjCA;IAkCAG,cAlCA,4BAkCA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA,CApCA;IAqCAC,cArCA,4BAqCA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA,+CADA;;cAAA;gBACAC,CADA;gBAEA;;cAFA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;EAxCA,CAlBA;EA4DAC,OA5DA,qBA4DA;IACA;EACA,CA9DA;EA+DAC,OA/DA,qBA+DA;IAAA;;IACA;MACA;MACA;MACA;MACAC;QAAA;MAAA;IACA;EACA;AAtEA","names":["name","components","HUpload","VueMarkdownEditor","data","model","categories","viewNum","commentNum","imgUrl","search","methods","handleEdit","index","row","console","handleDelete","setImgUrl","url","handleUploadImage","event","insertImage","files","handleSave","text","html","onSubmit","res","operation","isEmptyObj","updateCategory","getAllCategory","a","created","mounted","article"],"sourceRoot":"src/server/Article","sources":["ArticleWrite.vue"],"sourcesContent":["<template>\r\n    <div class=\"articleWrite\">\r\n        <div>\r\n            <el-form>\r\n                <el-form-item label=\"标题：\" label-width=\"60px\">\r\n                    <el-input type=\"text\" placeholder=\"请输入标题\" v-model=\"model.title\" autofocus></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"作者：\" label-width=\"60px\">\r\n                    <el-input type=\"text\" placeholder=\"请输入作者\" v-model=\"model.author\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"类别：\" label-width=\"60px\">\r\n                    <el-select v-model=\"model.categories\" placeholder=\"请选择\" multiple style=\"width: 100%;\">\r\n                        <el-option\r\n                                v-for=\"(item,i) in categories\"\r\n                                :key=\"item._id + `-${i}`\"\r\n                                :label=\"item.cateName\"\r\n                                :value=\"item._id\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"描述：\" label-width=\"60px\">\r\n                    <el-input type=\"textarea\" placeholder=\"请输入描述\" v-model=\"model.desc\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"上传图片：\" label-width=\"90px\">\r\n                    <h-upload :setImgUrl=\"setImgUrl\" :img-url=\"model.imgUrl\"></h-upload>\r\n                </el-form-item>\r\n                <el-form-item label=\"浏览数：\" label-width=\"90px\">\r\n                    <el-input-number v-model=\"model.viewNum\" :min=\"0\" label=\"描述文字\"></el-input-number>\r\n                </el-form-item>\r\n                <el-form-item label=\"评论列表：\">\r\n                    <el-table\r\n                            height=\"200\"\r\n                            :data=\"model.comments && model.comments.filter(data => !search || data.content.toLowerCase().includes(search.toLowerCase()))\"\r\n                            style=\"width: 100%\">\r\n                        <el-table-column label=\"_id\" prop=\"_id\"></el-table-column>\r\n                        <el-table-column label=\"头像\" prop=\"imgUrl\">\r\n                            <template slot-scope=\"scope\">\r\n                                <el-avatar :src=\"scope.row.imgUrl\" shape=\"square\"></el-avatar>\r\n                            </template>\r\n                        </el-table-column>\r\n                        <el-table-column label=\"姓名\" prop=\"name\"></el-table-column>\r\n                        <el-table-column label=\"评论内容\" prop=\"content\"></el-table-column>\r\n                        <el-table-column label=\"评论时间\" prop=\"createdAt\"></el-table-column>\r\n                        <el-table-column align=\"right\">\r\n                            <template slot=\"header\" slot-scope=\"scope\">\r\n                                <el-input v-model=\"search\" size=\"mini\" placeholder=\"输入关键字搜索\"/>\r\n                            </template>\r\n                            <template slot-scope=\"scope\">\r\n                                <el-button size=\"mini\"\r\n                                        @click=\"handleEdit(scope.$index, scope.row)\">Edit</el-button>\r\n                                <el-button\r\n                                        size=\"mini\"\r\n                                        type=\"danger\"\r\n                                        @click=\"handleDelete(scope.$index, scope.row)\">Delete</el-button>\r\n                            </template>\r\n                        </el-table-column>\r\n                    </el-table>\r\n                </el-form-item>\r\n            </el-form>\r\n            <vue-markdown-editor v-model=\"model.content\"\r\n                                 @save=\"handleSave\"\r\n                                 @upload-image=\"handleUploadImage\"\r\n                                 :include-level=\"[1,2,3]\"\r\n                                 height=\"400px\"></vue-markdown-editor>\r\n            <div style=\"text-align: center; margin-top: 2em;\">\r\n                <el-button type=\"primary\" plain style=\"width: 100%\" @click=\"onSubmit\">\r\n                    {{ JSON.stringify($route.query) === '{}' ? '添加' : '更新' }}文章\r\n                </el-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import VueMarkdownEditor from \"@/plugins/VueMarkdownEditor\";\r\n    import HUpload from \"@/server/component/h-upload\";\r\n    import {isEmptyObj} from \"@/utils\";\r\n\r\n    export default {\r\n        name: \"ArticleWrite\",\r\n        components: {\r\n            HUpload,\r\n            VueMarkdownEditor\r\n        },\r\n        data() {\r\n            return {\r\n                model: {\r\n                    categories: [],\r\n                    viewNum: 0,\r\n                    commentNum: 0,\r\n                    imgUrl: ''\r\n                },\r\n                categories: [],\r\n                search:''\r\n            }\r\n        },\r\n        methods: {\r\n            handleEdit(index, row) {\r\n                console.log(index, row);\r\n            },\r\n            handleDelete(index, row) {\r\n                console.log(index, row);\r\n            },\r\n            setImgUrl(url) {\r\n                this.model.imgUrl = url;\r\n            },\r\n            handleUploadImage(event, insertImage, files) {\r\n\r\n            },\r\n            handleSave(text, html) {\r\n                this.model.content = text;\r\n            },\r\n            async onSubmit() {\r\n                let res = null;\r\n                let operation = '添加'\r\n                if (this.model.content) {\r\n                    if (!isEmptyObj(this.$route.query)) {\r\n                        res = await this.$apis.admin.updateArticle(this.model);\r\n                        operation = '更新'\r\n                    } else {\r\n                        res = await this.$apis.admin.addArticle(this.model);\r\n                    }\r\n                    if (res) {\r\n                        this.$message.success(`文章\"${this.model.title}\"${operation}成功！`)\r\n                        await this.$router.push('ArticleUpdate')\r\n                    }\r\n                } else {\r\n                    this.$message.warning('请撰写文章后提交！');\r\n                }\r\n            },\r\n            async updateCategory() {\r\n\r\n            },\r\n            async getAllCategory() {\r\n                const a = await this.$apis.admin.getAllCategory('categories')\r\n                this.categories = a.data;\r\n            }\r\n        },\r\n        created() {\r\n            this.getAllCategory();\r\n        },\r\n        mounted() {\r\n            if (!isEmptyObj(this.$route.query)) {\r\n                const article = JSON.parse(localStorage.getItem('h-article-edit') || '{}');\r\n                this.model = {...article};\r\n                this.model.categories.length = 0\r\n                article.cates.forEach(item => this.model.categories.push(item._id))\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n</style>"]}]}