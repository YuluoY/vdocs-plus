{"remainingRequest":"D:\\桌面\\vdocs-plus\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面\\vdocs-plus\\src\\ui\\package\\TimeLine\\src\\TimeLine.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\桌面\\vdocs-plus\\src\\ui\\package\\TimeLine\\src\\TimeLine.vue","mtime":1659877936304},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661267353134},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\babel-loader\\lib\\index.js","mtime":1661267356503},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661267353134},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\vue-loader\\lib\\index.js","mtime":1661267357130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIVGltZUxpbmVJdGVtIGZyb20gIkAvdWkvcGFja2FnZS9UaW1lTGluZS9zcmMvVGltZUxpbmVJdGVtIjsKaW1wb3J0IEhUaW1lTGluZUJveCBmcm9tICJAL3VpL3BhY2thZ2UvVGltZUxpbmUvc3JjL1RpbWVMaW5lQm94IjsKaW1wb3J0IEhUaW1lTGluZVllYXIgZnJvbSAiQC91aS9wYWNrYWdlL1RpbWVMaW5lL3NyYy9UaW1lTGluZVllYXIiOwppbXBvcnQgSFRpbWVMaW5lTW9udGggZnJvbSAiQC91aS9wYWNrYWdlL1RpbWVMaW5lL3NyYy9UaW1lTGluZU1vbnRoIjsKaW1wb3J0IEhUaW1lTGluZURheSBmcm9tICJAL3VpL3BhY2thZ2UvVGltZUxpbmUvc3JjL1RpbWVMaW5lRGF5IjsKaW1wb3J0IHthZGRDbGFzcywgZGVsZXRlQ2xhc3N9IGZyb20gIkAvdWkvdXRpbC9kb20iOwppbXBvcnQge2Fyck9iamVjdFNvcnR9IGZyb20gIkAvdXRpbHMiOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIkhUaW1lTGluZSIsCiAgICBjb21wb25lbnRzOiB7SFRpbWVMaW5lQm94LCBIVGltZUxpbmVJdGVtLCBIVGltZUxpbmVEYXksIEhUaW1lTGluZU1vbnRoLCBIVGltZUxpbmVZZWFyfSwKICAgIHByb3BzOiB7CiAgICAgICAganVtcDogRnVuY3Rpb24sCiAgICAgICAgZGF0YToge3R5cGU6IEFycmF5LCBkZWZhdWx0OiAoKSA9PiBbXX0sCiAgICAgICAgLy8g5a2j6IqC55qE6aKc6ImyCiAgICAgICAgc2Vhc29uQ29sb3JzOiB7CiAgICAgICAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBzcHJpbmc6ICcjOTRDRDM1JywKICAgICAgICAgICAgICAgICAgICBzdW1tZXI6ICcjQzgzQjQ2JywKICAgICAgICAgICAgICAgICAgICBhdXR1bW46ICcjRkVCMDA5JywKICAgICAgICAgICAgICAgICAgICB3aW50ZXI6ICcjNTM5REJEJywKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Q29sb3I6ICcjNEZDMThFJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvLyDkvLjnvKnlm77moIfmoLflvI8KICAgICAgICBzdHJldGNoU3R5bGU6IHsKICAgICAgICAgICAgdHlwZTogT2JqZWN0LAogICAgICAgICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIG9wZW5JY29uOiAneGlhbGEnLAogICAgICAgICAgICAgICAgICAgIGNsb3NlSWNvbjogJ3NoYW5nbGEnLAogICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiA0LAogICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnc2lsdmVyJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICAvLyDmoIfpopjmoLflvI8KICAgICAgICB0aXRsZVN0eWxlOiB7CiAgICAgICAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogMC42LAogICAgICAgICAgICAgICAgICAgIHRleHRDb2xvcjogJ2JsYWNrJywKICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnd2hpdGUnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbW9kZWxzOiBbXSwKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIHdlYXRoZXIodmFsKSB7CiAgICAgICAgICAgIGNvbnN0IHNwcmluZyA9IFsnMScsICcyJywgJzMnXSwKICAgICAgICAgICAgICAgIHN1bW1lciA9IFsnNCcsICc1JywgJzYnXSwKICAgICAgICAgICAgICAgIGF1dHVtbiA9IFsnNycsICc4JywgJzknXSwKICAgICAgICAgICAgICAgIHdpbnRlciA9IFsnMTAnLCAnMTEnLCAnMTInXQogICAgICAgICAgICByZXR1cm4gKHNwcmluZy5pbmNsdWRlcyh2YWwpID8gdGhpcy5zZWFzb25Db2xvcnMuc3ByaW5nIDoKICAgICAgICAgICAgICAgIHN1bW1lci5pbmNsdWRlcyh2YWwpID8gdGhpcy5zZWFzb25Db2xvcnMuc3VtbWVyIDoKICAgICAgICAgICAgICAgICAgICBhdXR1bW4uaW5jbHVkZXModmFsKSA/IHRoaXMuc2Vhc29uQ29sb3JzLmF1dHVtbiA6CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbnRlci5pbmNsdWRlcyh2YWwpID8gdGhpcy5zZWFzb25Db2xvcnMud2ludGVyIDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Vhc29uQ29sb3JzLmRlZmF1bHRDb2xvcikKICAgICAgICB9LAogICAgICAgIG9uU3dpdGNoKGV2ZW50LCBtb2RlbCkgewogICAgICAgICAgICBjb25zdCBhcnIgPSBBcnJheS5mcm9tKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUobW9kZWwpKTsKICAgICAgICAgICAgYXJyLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZSA9IGdldENvbXB1dGVkU3R5bGUoaXRlbSkuZGlzcGxheTsKICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgICAgICAgaXRlbS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGVDbGFzcyhldmVudC50YXJnZXQsIGBpY29uLSR7dGhpcy5zdHJldGNoU3R5bGUuY2xvc2VJY29ufWApOwogICAgICAgICAgICAgICAgICAgIC8vIGFkZENsYXNzKGV2ZW50LnRhcmdldCwgYGljb24tJHt0aGlzLnN0cmV0Y2hTdHlsZS5vcGVuSWNvbn1gKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdibG9jaycpIHsKICAgICAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlQ2xhc3MoZXZlbnQudGFyZ2V0LCBgaWNvbi0ke3RoaXMuc3RyZXRjaFN0eWxlLm9wZW5JY29ufWApOwogICAgICAgICAgICAgICAgICAgIC8vIGFkZENsYXNzKGV2ZW50LnRhcmdldCwgYGljb24tJHt0aGlzLnN0cmV0Y2hTdHlsZS5jbG9zZUljb259YCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBidWlsZChhcnIpIHsKICAgICAgICAgICAgbGV0IG9iaiA9IHt9CiAgICAgICAgICAgIGFyci5mb3JFYWNoKChpdGVtLCBpbmRleCwgYXJyKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBbeWVhciwgbW9udGgsIGRheV0gPSBpdGVtLnNwbGl0KCctJyk7CiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMob2JqKS5pbmNsdWRlcyh5ZWFyKSkgewogICAgICAgICAgICAgICAgICAgIGlmICghb2JqW3llYXJdW21vbnRoXSkgewogICAgICAgICAgICAgICAgICAgICAgICBvYmpbeWVhcl1bbW9udGhdID0gW107CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBvYmpbeWVhcl0gPSB7fQogICAgICAgICAgICAgICAgICAgIG9ialt5ZWFyXVttb250aF0gPSBbXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5kYXRhW2luZGV4XS5kYXkgPSBkYXk7CiAgICAgICAgICAgICAgICBvYmpbeWVhcl1bbW9udGhdLnB1c2godGhpcy5kYXRhW2luZGV4XSkKICAgICAgICAgICAgfSkKICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICB9LAogICAgICAgIC8vIOiuoeeul+avj+W5tOeahOaWh+eroOaVsAogICAgICAgIGFubnVhbEFydGljbGVzKHllYXIpIHsKICAgICAgICAgICAgbGV0IGFydGljbGVzID0gMDsKICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5tb2RlbHNbeWVhcl0pLmZvckVhY2gobW9udGggPT4gYXJ0aWNsZXMgKz0gT2JqZWN0LmtleXModGhpcy5tb2RlbHNbeWVhcl1bbW9udGhdKS5sZW5ndGgpCiAgICAgICAgICAgIHJldHVybiBhcnRpY2xlczsKICAgICAgICB9LAogICAgICAgIHNvcnREYXlzKGRheXMpIHsKICAgICAgICAgICAgYXJyT2JqZWN0U29ydChkYXlzLCAnZGF5Jyk7CiAgICAgICAgICAgIHJldHVybiBkYXlzCiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgICBjb25zdCBjcmVhdGVkQXRBcnIgPSBbXQogICAgICAgICAgICB0aGlzLmRhdGEuZm9yRWFjaChpdGVtID0+IGNyZWF0ZWRBdEFyci5wdXNoKGl0ZW0uY3JlYXRlZEF0LnN1YnN0cmluZygwLCAxMCkpKQogICAgICAgICAgICB0aGlzLm1vZGVscyA9IHRoaXMuYnVpbGQoY3JlYXRlZEF0QXJyKQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhcnJPYmplY3RTb3J0KHRoaXMubW9kZWxzKSkKICAgICAgICB9KQogICAgfQp9Cg=="},{"version":3,"sources":["TimeLine.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TimeLine.vue","sourceRoot":"src/ui/package/TimeLine/src","sourcesContent":["<template>\r\n    <div class=\"h-timeLine\">\r\n        <h-time-line-box>\r\n            <h-time-line-year\r\n                    v-for=\"(year, i) in Object.keys(models)\" :key=\"i\"\r\n                    :year=\"year\" :onSwitch=\"onSwitch\" :stretch-style=\"stretchStyle\"\r\n                    :annualArticles=\"annualArticles(year)\">\r\n                <h-time-line-month\r\n                        v-for=\"(month, j) in Object.keys(models[year])\" :key=\"j\"\r\n                        :year=\"year\"\r\n                        :month=\"month\"\r\n                        :onSwitch=\"onSwitch\"\r\n                        :weather=\"weather\"\r\n                        :stretch-icon=\"stretchStyle.openIcon\">\r\n                    <div :class=\"`day-wrapper month-${month}-${year}`\">\r\n                        <h-time-line-day\r\n                                v-for=\"(d, k) in sortDays(models[year][month])\" :key=\"k\"\r\n                                :jump=\"jump\"\r\n                                :id=\"d._id\"\r\n                                :month=\"month\"\r\n                                :day=\"d.day\"\r\n                                :weather=\"weather\">\r\n                            <h-time-line-item\r\n                                    :font-size=\"titleStyle.fontSize\"\r\n                                    :text-color=\"titleStyle.textColor\"\r\n                                    :background=\"titleStyle.background\"\r\n                                    :title=\"d.title\"\r\n                                    :updatedAt=\"d.updatedAt\">\r\n\r\n                            </h-time-line-item>\r\n                        </h-time-line-day>\r\n                    </div>\r\n                </h-time-line-month>\r\n            </h-time-line-year>\r\n        </h-time-line-box>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import HTimeLineItem from \"@/ui/package/TimeLine/src/TimeLineItem\";\r\n    import HTimeLineBox from \"@/ui/package/TimeLine/src/TimeLineBox\";\r\n    import HTimeLineYear from \"@/ui/package/TimeLine/src/TimeLineYear\";\r\n    import HTimeLineMonth from \"@/ui/package/TimeLine/src/TimeLineMonth\";\r\n    import HTimeLineDay from \"@/ui/package/TimeLine/src/TimeLineDay\";\r\n    import {addClass, deleteClass} from \"@/ui/util/dom\";\r\n    import {arrObjectSort} from \"@/utils\";\r\n\r\n    export default {\r\n        name: \"HTimeLine\",\r\n        components: {HTimeLineBox, HTimeLineItem, HTimeLineDay, HTimeLineMonth, HTimeLineYear},\r\n        props: {\r\n            jump: Function,\r\n            data: {type: Array, default: () => []},\r\n            // 季节的颜色\r\n            seasonColors: {\r\n                type: Object,\r\n                default: () => {\r\n                    return {\r\n                        spring: '#94CD35',\r\n                        summer: '#C83B46',\r\n                        autumn: '#FEB009',\r\n                        winter: '#539DBD',\r\n                        defaultColor: '#4FC18E'\r\n                    }\r\n                }\r\n            },\r\n            // 伸缩图标样式\r\n            stretchStyle: {\r\n                type: Object,\r\n                default: () => {\r\n                    return {\r\n                        openIcon: 'xiala',\r\n                        closeIcon: 'shangla',\r\n                        fontSize: 4,\r\n                        color: 'silver'\r\n                    }\r\n                }\r\n            },\r\n            // 标题样式\r\n            titleStyle: {\r\n                type: Object,\r\n                default: () => {\r\n                    return {\r\n                        fontSize: 0.6,\r\n                        textColor: 'black',\r\n                        background: 'white'\r\n                    }\r\n                }\r\n            },\r\n        },\r\n        data() {\r\n            return {\r\n                models: [],\r\n            }\r\n        },\r\n        methods: {\r\n            weather(val) {\r\n                const spring = ['1', '2', '3'],\r\n                    summer = ['4', '5', '6'],\r\n                    autumn = ['7', '8', '9'],\r\n                    winter = ['10', '11', '12']\r\n                return (spring.includes(val) ? this.seasonColors.spring :\r\n                    summer.includes(val) ? this.seasonColors.summer :\r\n                        autumn.includes(val) ? this.seasonColors.autumn :\r\n                            winter.includes(val) ? this.seasonColors.winter :\r\n                                this.seasonColors.defaultColor)\r\n            },\r\n            onSwitch(event, model) {\r\n                const arr = Array.from(document.getElementsByClassName(model));\r\n                arr.forEach(item => {\r\n                    const state = getComputedStyle(item).display;\r\n                    if (state === 'none') {\r\n                        item.style.display = 'block';\r\n                        // deleteClass(event.target, `icon-${this.stretchStyle.closeIcon}`);\r\n                        // addClass(event.target, `icon-${this.stretchStyle.openIcon}`);\r\n                    } else if (state === 'block') {\r\n                        item.style.display = 'none';\r\n                        // deleteClass(event.target, `icon-${this.stretchStyle.openIcon}`);\r\n                        // addClass(event.target, `icon-${this.stretchStyle.closeIcon}`);\r\n                    }\r\n                })\r\n            },\r\n            build(arr) {\r\n                let obj = {}\r\n                arr.forEach((item, index, arr) => {\r\n                    const [year, month, day] = item.split('-');\r\n                    if (Object.keys(obj).includes(year)) {\r\n                        if (!obj[year][month]) {\r\n                            obj[year][month] = [];\r\n                        }\r\n                    } else {\r\n                        obj[year] = {}\r\n                        obj[year][month] = []\r\n                    }\r\n                    this.data[index].day = day;\r\n                    obj[year][month].push(this.data[index])\r\n                })\r\n                return obj;\r\n            },\r\n            // 计算每年的文章数\r\n            annualArticles(year) {\r\n                let articles = 0;\r\n                Object.keys(this.models[year]).forEach(month => articles += Object.keys(this.models[year][month]).length)\r\n                return articles;\r\n            },\r\n            sortDays(days) {\r\n                arrObjectSort(days, 'day');\r\n                return days\r\n            }\r\n        },\r\n        mounted() {\r\n            this.$nextTick(() => {\r\n                const createdAtArr = []\r\n                this.data.forEach(item => createdAtArr.push(item.createdAt.substring(0, 10)))\r\n                this.models = this.build(createdAtArr)\r\n                // console.log(arrObjectSort(this.models))\r\n            })\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .h-timeLine {\r\n    width: 100%;\r\n    height: auto;\r\n  }\r\n</style>"]}]}