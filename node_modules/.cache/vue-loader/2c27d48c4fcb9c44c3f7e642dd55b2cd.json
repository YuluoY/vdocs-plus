{"remainingRequest":"D:\\Ê°åÈù¢\\vdocs-plus\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Ê°åÈù¢\\vdocs-plus\\src\\components\\comment\\h-comment-display.vue?vue&type=style&index=0&id=1c3404df&scoped=true&lang=scss&","dependencies":[{"path":"D:\\Ê°åÈù¢\\vdocs-plus\\src\\components\\comment\\h-comment-display.vue","mtime":1660980644331},{"path":"D:\\Ê°åÈù¢\\vdocs-plus\\node_modules\\css-loader\\dist\\cjs.js","mtime":1661267354466},{"path":"D:\\Ê°åÈù¢\\vdocs-plus\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1661267358739},{"path":"D:\\Ê°åÈù¢\\vdocs-plus\\node_modules\\postcss-loader\\src\\index.js","mtime":1661267356452},{"path":"D:\\Ê°åÈù¢\\vdocs-plus\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1661267353103},{"path":"D:\\Ê°åÈù¢\\vdocs-plus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661267353134},{"path":"D:\\Ê°åÈù¢\\vdocs-plus\\node_modules\\vue-loader\\lib\\index.js","mtime":1661267357130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hdCB7CiAgY29sb3I6ICM0MDllZmYgIWltcG9ydGFudDsKICBjdXJzb3I6IHBvaW50ZXI7CgogICY6aG92ZXIgewogICAgY29sb3I6ICM0MUI4ODMgIWltcG9ydGFudDsKICB9Cn0KCi5jb21tZW50LWRpc3BsYXktd3JhcHBlciB7CiAgd2lkdGg6IDY0ZW07CiAgbWFyZ2luOiAwIGF1dG87CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHotaW5kZXg6IDEwOwoKICAuY29tbWVudC1pdGVtLXdyYXBwZXIgewogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBtYXJnaW4tdG9wOiAxMHB4OwoKICAgIC5jb21tZW50LWl0ZW0gewogICAgICAudG9wLWluZm8gewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKCiAgICAgICAgLmltZyB7CiAgICAgICAgICB3aWR0aDogNTBweDsKICAgICAgICAgIGhlaWdodDogNTBweDsKICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICB9CgogICAgICAgIC5yaWdodCB7CiAgICAgICAgICBmbGV4LWdyb3c6IDE7CiAgICAgICAgICBwYWRkaW5nOiAwIDFlbTsKICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyZW07CiAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICAgICAgICAgIGJvcmRlci1yaWdodDogc29saWQgMXB4IGJsYWNrOwoKICAgICAgICAgIC50b3AgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwoKICAgICAgICAgICAgLm5hbWUgewogICAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4yZW07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5iYXNlLXNpZ24gewogICAgICAgICAgICAgIGZvbnQtc2l6ZTogLjllbTsKICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMmVtOwogICAgICAgICAgICAgIGNvbG9yOiBzaWx2ZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAuY3JlYXRlZEF0IHsKICAgICAgICAgICAgY29sb3I6IHNpbHZlcjsKICAgICAgICAgICAgZm9udC1zaXplOiAuOWVtOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgLmNvbnRlbnQtd3JhcHBlci1zdWIgewogICAgICAgIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7CiAgICAgIH0KCiAgICAgIC5jb250ZW50LXdyYXBwZXIgewogICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICB3aWR0aDogOTMlOwogICAgICAgIGZsb2F0OiByaWdodDsKCiAgICAgICAgLm1haW4gewogICAgICAgICAgZmxleDogMTsKICAgICAgICAgIGJvcmRlci1yaWdodDogc29saWQgMXB4IGJsYWNrOwogICAgICAgIH0KCiAgICAgICAgLm1haW4tZnVuYyB7CiAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgZmxleDogMTsKICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOwogICAgICAgICAgYm9yZGVyLWJvdHRvbTogc29saWQgMXB4IGJsYWNrOwogICAgICAgICAgYm9yZGVyLXJpZ2h0OiBzb2xpZCAxcHggYmxhY2s7CgogICAgICAgICAgJiA+IGRpdiB7CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyByZXBseQogICAgICAgIC5yZXBseS1hcmVhLXdyYXBwZXIgewogICAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["h-comment-display.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkLA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"h-comment-display.vue","sourceRoot":"src/components/comment","sourcesContent":["<template>\r\n    <div class=\"h-comment-display\" v-on=\"$listeners\">\r\n        <div class=\"comment-display-wrapper\">\r\n            <div class=\"comment-item-wrapper\">\r\n                <div class=\"comment-item\"\r\n                     v-for=\"(item, i) in comments\" :key=\"i\">\r\n                    <div class=\"top-info\">\r\n                        <img v-lazy=\"item.imgUrl\" alt=\"Â§¥ÂÉè\" class=\"img\"/>\r\n                        <div class=\"right\">\r\n                            <div class=\"top\">\r\n                                <a :href=\"isAddress(item.address)  ? 'javascript:void(0);' : item.address\"\r\n                                   :style=\"`${isAddress(item.address) && 'cursor: text;'}`\">\r\n                                    <div class=\"name\" :id=\"item._id\">{{ item.name }}</div>\r\n                                </a>\r\n                                <div class=\"browser base-sign hover-blue\">\r\n                                    <svg-icon icon-class=\"browser\" style=\"margin-right: 5px;\"></svg-icon>\r\n                                    <span>{{ item.browser }}</span>\r\n                                </div>\r\n                                <div class=\"system base-sign hover-blue\">\r\n                                    <svg-icon icon-class=\"system\" style=\"margin-right: 5px;\"></svg-icon>\r\n                                    <span>{{ item.system }}</span>\r\n                                </div>\r\n                                <div class=\"cname base-sign hover-blue\">\r\n                                    <svg-icon icon-class=\"address\" style=\"margin-right: 5px;\"></svg-icon>\r\n                                    <span>{{ item.cname }}</span>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"createdAt\">\r\n                                <span class=\"hover-blue\">{{ formatDate(item.createdAt) }}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div :class=\"at ? 'content-wrapper content-wrapper-sub':'content-wrapper'\">\r\n                        <div class=\"main\" :style=\"at && 'margin-left:70px;'\">\r\n                            <a v-if=\"at\" class=\"at\"\r\n                               @click=\"jump(isArrayObject(item.sub,'_id')?id:item.sub[0])\">\r\n                                @{{ isArrayObject(item.sub, '_id') ? at : idToName[item.sub[0]] }}Ôºö\r\n                            </a>\r\n                            <span>{{ item.content }}</span>\r\n                        </div>\r\n                        <div class=\"main-func\">\r\n                            <div @click=\"onReplyStateChange(item._id)\"\r\n                                 class=\"iconfont icon-reply-\"\r\n                                 title=\"ÂõûÂ§çüòÄ\"></div>\r\n                            <div>\r\n                                <span @click.prevent=\"onLike(item._id, $event)\"\r\n                                      class=\"like iconfont icon-like\" title=\"Ëµû‰∏Ä‰∏™ü§≠\"></span>\r\n                                <span style=\"margin-left: 5px;\">{{ item.like }}</span>\r\n                            </div>\r\n                            <div>\r\n                                <span @click=\"onLike(item._id, $event)\"\r\n                                      class=\"dislike iconfont icon-dislike\" title=\"Ë∏©‰∏Ä‰∏ãü§¨\"></span>\r\n                                <span style=\"margin-left: 5px\">{{ item.dislike }}</span>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"reply-area-wrapper\">\r\n                            <h-comment-area\r\n                                    :id=\"item._id\"\r\n                                    :is-reply-state=\"isReplyState\"\r\n                                    @onReplyStateChange=\"onReplyStateChange\"\r\n                                    v-if=\"states[item._id]\"\r\n                            ></h-comment-area>\r\n                        </div>\r\n                        <div v-if=\"isArrayObject(item.sub, '_id')\">\r\n                            <h-comment-display\r\n                                    :isSubComment=\"true\"\r\n                                    :at=\"item.name\"\r\n                                    :id=\"item._id\"\r\n                                    :idToName=\"idToName\"\r\n                                    :comments=\"item.sub\"\r\n                                    :is-reply-state=\"isReplyState\"\r\n                                    :states=\"states\"\r\n                                    :on-reply-state-change=\"onReplyStateChange\"></h-comment-display>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import HComment from \"@/components/comment/h-comment\";\r\n    import HCommentArea from \"@/components/comment/h-comment-area\";\r\n    import dayjs from \"dayjs\";\r\n    import './assets/css/iconfont.css'\r\n\r\n    export default {\r\n        name: \"HCommentDisplay\",\r\n        components: {HCommentArea, HComment},\r\n        props: {\r\n            comments: {type: Array, default: () => []}, // ËØÑËÆ∫Êï∞ÁªÑ\r\n            isReplyState: Boolean, // ÂÖ®Â±ÄÂõûÂ§çÁä∂ÊÄÅÂèòÈáè\r\n            states: Object, // Áä∂ÊÄÅË°®ÔºåÊØè‰∏Ä‰∏™ËØÑËÆ∫Â∞±Êúâ‰∏Ä‰∏™idÔºåÊØè‰∏Ä‰∏™idÂ∞±Âú®Ë°®‰∏≠Êúâ‰∏Ä‰∏™Áä∂ÊÄÅÔºåÂàùÂßãÂÄºÊòØfalseÔºåÂç≥‰∏çÊòæÁ§∫„ÄÇ\r\n            onReplyStateChange: Function, // ËøôÊòØh-commentÁªÑ‰ª∂ÁöÑÊñπÊ≥ïÔºåÁî®‰∫éÊîπÂèòÂÖ®Â±ÄÁöÑÂõûÂ§çÁä∂ÊÄÅ\r\n            isSubComment: {type: Boolean, default: false}, // Ëøô‰∏™ÂèòÈáèÂèØ‰ª•ÂëäËØâdisplayÁªÑ‰ª∂‰º†ËøáÊù•ÁöÑcommentsÊòØ‰∏çÊòØÂ≠êËØÑËÆ∫\r\n            at: String,  // ‰º†ËøáÊù•ÁöÑÊòØË¢´ÂõûÂ§çËÄÖÁöÑnameÂÄºÔºå@XX\r\n            id: String,  // Áî®‰∫éÂÆö‰Ωçname‰∏ädivÁöÑidÔºåÁÑ∂ÂêéËøõË°åjump\r\n            idToName: Object\r\n        },\r\n        data() {\r\n            return {\r\n                statesX: '',\r\n            }\r\n        },\r\n        watch: {\r\n            states(newVal) {\r\n                this.states = newVal;\r\n            }\r\n        },\r\n\r\n        methods: {\r\n            isAddress(address) {\r\n                return address === '#'\r\n            },\r\n            isArrayObject(arr, unique) {\r\n                return arr.every(i => i.hasOwnProperty(unique));\r\n            },\r\n            jump(id) {\r\n                Object.keys(this.states).forEach(k => {\r\n                    const n = document.getElementById(k);\r\n                    if (n.style.color === 'red') {\r\n                        n.style.color = 'black' // ËÆæÁΩÆÂßìÂêç‰∏∫Á∫¢Ëâ≤ÁöÑÊÅ¢Â§ç‰∏∫ÈªëËâ≤\r\n                    }\r\n                })\r\n                let tar = document.getElementById(id)// Ëé∑ÂèñÈúÄË¶ÅÊªöÂä®ÁöÑË∑ùÁ¶ª\r\n                tar.style.color = 'red'; // ËÆæÁΩÆË¢´ÁÇπÂáª@ÁöÑname‰∏∫Á∫¢Ëâ≤\r\n\r\n                const header = window.location.origin // http://localhost/8080\r\n                const path = window.location.hash.substring(1).split('#')[0] // Ë∑ØÁî±Ë∑ØÂæÑ\r\n                const anchor = tar.id // ÈîöÁÇπÂêçÁß∞\r\n                window.location.href = `${header}/#${path}#${anchor}`\r\n\r\n                let gap = 5;\r\n                tar.getBoundingClientRect().bottom < 0 && (gap = -gap);\r\n                clearInterval(this.timer)\r\n                this.timer = setInterval(_ => {\r\n                    let total = tar.getBoundingClientRect().bottom - 100; // ÂáèÂéªÈ°∂ÈÉ®ÂØºËà™Ê†èÈ´òÂ∫¶\r\n                    if ((gap < 0 && total >= 0) || (gap > 0 && total <= 0)) {\r\n                        clearInterval(this.timer)\r\n                    }\r\n                    document.body.scrollTo(0, document.body.scrollTop + gap)\r\n                }, 1)\r\n\r\n            },\r\n            // ÁÇπËµû\r\n            async onLike(_id, event) {\r\n                const userInfo = (await this.$apis.rest.getUserIp()).data;\r\n                const field = event.target.className.split(' ')[0];\r\n\r\n                this.$apis.web.updateLike({_id, field, userInfo}).then(res => {\r\n                    if (res) {\r\n                        this.$store.commit('comment/setCommentsByPath', this);\r\n                        event.target.style.color = 'red';\r\n                    }\r\n                })\r\n            },\r\n            formatDate(val) {\r\n                const currVal = new Date(val).getTime()\r\n                const model = {\r\n                    'year': 'Âπ¥',\r\n                    'month': 'Êúà',\r\n                    'week': 'Âë®',\r\n                    'day': 'Â§©',\r\n                    'hour': 'Â∞èÊó∂',\r\n                    'minute': 'ÂàÜÈíü',\r\n                    'second': 'Áßí',\r\n                    'millisecond': 'ÊØ´Áßí'\r\n                }\r\n                const timeModel = Object.keys(model).filter(k => dayjs(Date.now()).diff(currVal, k))[0]\r\n                const timeDiff = dayjs(Date.now()).diff(currVal, timeModel);\r\n                return `${timeDiff}${model[timeModel]}Ââç`\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .at {\r\n    color: #409eff !important;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n      color: #41B883 !important;\r\n    }\r\n  }\r\n\r\n  .comment-display-wrapper {\r\n    width: 64em;\r\n    margin: 0 auto;\r\n    position: relative;\r\n    z-index: 10;\r\n\r\n    .comment-item-wrapper {\r\n      display: flex;\r\n      flex-direction: column;\r\n      margin-top: 10px;\r\n\r\n      .comment-item {\r\n        .top-info {\r\n          display: flex;\r\n          align-items: center;\r\n\r\n          .img {\r\n            width: 50px;\r\n            height: 50px;\r\n            border-radius: 50%;\r\n          }\r\n\r\n          .right {\r\n            flex-grow: 1;\r\n            padding: 0 1em;\r\n            line-height: 2em;\r\n            display: flex;\r\n            flex-direction: column;\r\n            justify-content: space-between;\r\n            border-right: solid 1px black;\r\n\r\n            .top {\r\n              display: flex;\r\n\r\n              .name {\r\n                font-size: 1.2em;\r\n              }\r\n\r\n              .base-sign {\r\n                font-size: .9em;\r\n                margin-left: 2em;\r\n                color: silver;\r\n              }\r\n            }\r\n\r\n            .createdAt {\r\n              color: silver;\r\n              font-size: .9em;\r\n            }\r\n          }\r\n        }\r\n\r\n        .content-wrapper-sub {\r\n          width: 100% !important;\r\n        }\r\n\r\n        .content-wrapper {\r\n          display: flex;\r\n          flex-direction: column;\r\n          width: 93%;\r\n          float: right;\r\n\r\n          .main {\r\n            flex: 1;\r\n            border-right: solid 1px black;\r\n          }\r\n\r\n          .main-func {\r\n            display: flex;\r\n            flex: 1;\r\n            align-items: center;\r\n            justify-content: flex-end;\r\n            border-bottom: solid 1px black;\r\n            border-right: solid 1px black;\r\n\r\n            & > div {\r\n              display: inline-block;\r\n              cursor: pointer;\r\n              margin-right: 20px;\r\n            }\r\n          }\r\n\r\n          // reply\r\n          .reply-area-wrapper {\r\n            margin-bottom: 30px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>"]}]}