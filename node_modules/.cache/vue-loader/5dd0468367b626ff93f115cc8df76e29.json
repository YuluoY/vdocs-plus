{"remainingRequest":"D:\\桌面\\vdocs-plus\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面\\vdocs-plus\\src\\ui\\package\\TimeLine\\src\\TimeLine.vue?vue&type=style&index=0&id=6a73eeaf&scoped=true&lang=scss&","dependencies":[{"path":"D:\\桌面\\vdocs-plus\\src\\ui\\package\\TimeLine\\src\\TimeLine.vue","mtime":1659877936304},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\css-loader\\dist\\cjs.js","mtime":1661267354466},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1661267358739},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\postcss-loader\\src\\index.js","mtime":1661267356452},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1661267353103},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661267353134},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\vue-loader\\lib\\index.js","mtime":1661267357130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmgtdGltZUxpbmUgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogYXV0bzsKfQo="},{"version":3,"sources":["TimeLine.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkKA;AACA;AACA;AACA","file":"TimeLine.vue","sourceRoot":"src/ui/package/TimeLine/src","sourcesContent":["<template>\r\n    <div class=\"h-timeLine\">\r\n        <h-time-line-box>\r\n            <h-time-line-year\r\n                    v-for=\"(year, i) in Object.keys(models)\" :key=\"i\"\r\n                    :year=\"year\" :onSwitch=\"onSwitch\" :stretch-style=\"stretchStyle\"\r\n                    :annualArticles=\"annualArticles(year)\">\r\n                <h-time-line-month\r\n                        v-for=\"(month, j) in Object.keys(models[year])\" :key=\"j\"\r\n                        :year=\"year\"\r\n                        :month=\"month\"\r\n                        :onSwitch=\"onSwitch\"\r\n                        :weather=\"weather\"\r\n                        :stretch-icon=\"stretchStyle.openIcon\">\r\n                    <div :class=\"`day-wrapper month-${month}-${year}`\">\r\n                        <h-time-line-day\r\n                                v-for=\"(d, k) in sortDays(models[year][month])\" :key=\"k\"\r\n                                :jump=\"jump\"\r\n                                :id=\"d._id\"\r\n                                :month=\"month\"\r\n                                :day=\"d.day\"\r\n                                :weather=\"weather\">\r\n                            <h-time-line-item\r\n                                    :font-size=\"titleStyle.fontSize\"\r\n                                    :text-color=\"titleStyle.textColor\"\r\n                                    :background=\"titleStyle.background\"\r\n                                    :title=\"d.title\"\r\n                                    :updatedAt=\"d.updatedAt\">\r\n\r\n                            </h-time-line-item>\r\n                        </h-time-line-day>\r\n                    </div>\r\n                </h-time-line-month>\r\n            </h-time-line-year>\r\n        </h-time-line-box>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import HTimeLineItem from \"@/ui/package/TimeLine/src/TimeLineItem\";\r\n    import HTimeLineBox from \"@/ui/package/TimeLine/src/TimeLineBox\";\r\n    import HTimeLineYear from \"@/ui/package/TimeLine/src/TimeLineYear\";\r\n    import HTimeLineMonth from \"@/ui/package/TimeLine/src/TimeLineMonth\";\r\n    import HTimeLineDay from \"@/ui/package/TimeLine/src/TimeLineDay\";\r\n    import {addClass, deleteClass} from \"@/ui/util/dom\";\r\n    import {arrObjectSort} from \"@/utils\";\r\n\r\n    export default {\r\n        name: \"HTimeLine\",\r\n        components: {HTimeLineBox, HTimeLineItem, HTimeLineDay, HTimeLineMonth, HTimeLineYear},\r\n        props: {\r\n            jump: Function,\r\n            data: {type: Array, default: () => []},\r\n            // 季节的颜色\r\n            seasonColors: {\r\n                type: Object,\r\n                default: () => {\r\n                    return {\r\n                        spring: '#94CD35',\r\n                        summer: '#C83B46',\r\n                        autumn: '#FEB009',\r\n                        winter: '#539DBD',\r\n                        defaultColor: '#4FC18E'\r\n                    }\r\n                }\r\n            },\r\n            // 伸缩图标样式\r\n            stretchStyle: {\r\n                type: Object,\r\n                default: () => {\r\n                    return {\r\n                        openIcon: 'xiala',\r\n                        closeIcon: 'shangla',\r\n                        fontSize: 4,\r\n                        color: 'silver'\r\n                    }\r\n                }\r\n            },\r\n            // 标题样式\r\n            titleStyle: {\r\n                type: Object,\r\n                default: () => {\r\n                    return {\r\n                        fontSize: 0.6,\r\n                        textColor: 'black',\r\n                        background: 'white'\r\n                    }\r\n                }\r\n            },\r\n        },\r\n        data() {\r\n            return {\r\n                models: [],\r\n            }\r\n        },\r\n        methods: {\r\n            weather(val) {\r\n                const spring = ['1', '2', '3'],\r\n                    summer = ['4', '5', '6'],\r\n                    autumn = ['7', '8', '9'],\r\n                    winter = ['10', '11', '12']\r\n                return (spring.includes(val) ? this.seasonColors.spring :\r\n                    summer.includes(val) ? this.seasonColors.summer :\r\n                        autumn.includes(val) ? this.seasonColors.autumn :\r\n                            winter.includes(val) ? this.seasonColors.winter :\r\n                                this.seasonColors.defaultColor)\r\n            },\r\n            onSwitch(event, model) {\r\n                const arr = Array.from(document.getElementsByClassName(model));\r\n                arr.forEach(item => {\r\n                    const state = getComputedStyle(item).display;\r\n                    if (state === 'none') {\r\n                        item.style.display = 'block';\r\n                        // deleteClass(event.target, `icon-${this.stretchStyle.closeIcon}`);\r\n                        // addClass(event.target, `icon-${this.stretchStyle.openIcon}`);\r\n                    } else if (state === 'block') {\r\n                        item.style.display = 'none';\r\n                        // deleteClass(event.target, `icon-${this.stretchStyle.openIcon}`);\r\n                        // addClass(event.target, `icon-${this.stretchStyle.closeIcon}`);\r\n                    }\r\n                })\r\n            },\r\n            build(arr) {\r\n                let obj = {}\r\n                arr.forEach((item, index, arr) => {\r\n                    const [year, month, day] = item.split('-');\r\n                    if (Object.keys(obj).includes(year)) {\r\n                        if (!obj[year][month]) {\r\n                            obj[year][month] = [];\r\n                        }\r\n                    } else {\r\n                        obj[year] = {}\r\n                        obj[year][month] = []\r\n                    }\r\n                    this.data[index].day = day;\r\n                    obj[year][month].push(this.data[index])\r\n                })\r\n                return obj;\r\n            },\r\n            // 计算每年的文章数\r\n            annualArticles(year) {\r\n                let articles = 0;\r\n                Object.keys(this.models[year]).forEach(month => articles += Object.keys(this.models[year][month]).length)\r\n                return articles;\r\n            },\r\n            sortDays(days) {\r\n                arrObjectSort(days, 'day');\r\n                return days\r\n            }\r\n        },\r\n        mounted() {\r\n            this.$nextTick(() => {\r\n                const createdAtArr = []\r\n                this.data.forEach(item => createdAtArr.push(item.createdAt.substring(0, 10)))\r\n                this.models = this.build(createdAtArr)\r\n                // console.log(arrObjectSort(this.models))\r\n            })\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .h-timeLine {\r\n    width: 100%;\r\n    height: auto;\r\n  }\r\n</style>"]}]}