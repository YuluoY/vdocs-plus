{"remainingRequest":"D:\\桌面\\vdocs-plus\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\桌面\\vdocs-plus\\src\\components\\h-article-sidebar.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\桌面\\vdocs-plus\\src\\components\\h-article-sidebar.vue","mtime":1661280552266},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661267353134},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\babel-loader\\lib\\index.js","mtime":1661267356503},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1661267353134},{"path":"D:\\桌面\\vdocs-plus\\node_modules\\vue-loader\\lib\\index.js","mtime":1661267357130}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQge2FkZENsYXNzLCBkZWxldGVDbGFzcywgaXNDbGFzc25hbWV9IGZyb20gIkAvdXRpbHMvZG9tIjsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJIQXJ0aWNsZVNpZGViYXIiLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0aXRsZXM6IFtdLAogICAgICAgICAgICBhcnRpY2xlU2lkZWJhcjogW10sCiAgICAgICAgICAgIGFjdGl2ZVN0ZXA6IDAsCiAgICAgICAgICAgIHNwZWVkOiAxLAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgbW92ZShldmVudCkgewogICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0Lm5vZGVOYW1lID09PSAnQScpIHsKICAgICAgICAgICAgICAgIHRoaXMuanVtcChldmVudC50YXJnZXQuaW5uZXJUZXh0KQogICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUaXRsZUFjdGl2ZShldmVudC50YXJnZXQucGFyZW50Tm9kZSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgdXBkYXRlVGl0bGVBY3RpdmUobm9kZSkgewogICAgICAgICAgICBjb25zdCBUSVRMRUFDVElWRSA9ICd0aXRsZS1hY3RpdmUnOwogICAgICAgICAgICBpZiAoIXRoaXMudGl0bGVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NpZGViYXItd3JhcHBlcicpWzBdOwogICAgICAgICAgICAgICAgdGhpcy50aXRsZXMgPSBBcnJheS5mcm9tKHNpZGViYXIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2RpdicpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnRpdGxlcy5mb3JFYWNoKG4gPT4gaXNDbGFzc25hbWUobiwgVElUTEVBQ1RJVkUpICYmIGRlbGV0ZUNsYXNzKG4sIFRJVExFQUNUSVZFKSkKICAgICAgICAgICAgYWRkQ2xhc3Mobm9kZSwgVElUTEVBQ1RJVkUpCiAgICAgICAgfSwKICAgICAgICBqdW1wKGlkKSB7CiAgICAgICAgICAgIGxldCB0YXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5jaG9yLScgKyBpZCkvLyDojrflj5bpnIDopoHmu5rliqjnmoTot53nprsKCiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gLy8gaHR0cDovL2xvY2FsaG9zdC84MDgwCiAgICAgICAgICAgIGNvbnN0IHBhdGggPSB3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSkuc3BsaXQoJyMnKVswXSAvLyDot6/nlLHot6/lvoQKICAgICAgICAgICAgY29uc3QgYW5jaG9yID0gdGFyLnBhcmVudE5vZGUuaWQgLy8g6ZSa54K55ZCN56ewCiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYCR7aGVhZGVyfS8jJHtwYXRofSMke2FuY2hvcn1gCgogICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpCiAgICAgICAgICAgIGxldCBnYXAgPSBNYXRoLmFicyh0YXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tKSAvIDI1NTsKICAgICAgICAgICAgLy8gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkg5Y+v5Lul5om+5Yiw5b2T5YmN5YWD57Sg5L2N5LqO5rWP6KeI5Zmo6KeG5Y+j55qE57ud5a+55a6a5L2N6Led56a7CiAgICAgICAgICAgIHRhci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPCAwICYmIChnYXAgPSAtZ2FwKTsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKQogICAgICAgICAgICBjb25zb2xlLnRpbWUoJ+aWh+eroOWvvOiIqui3s+i9rOiAl+aXtu+8micpCiAgICAgICAgICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChfID0+IHsKICAgICAgICAgICAgICAgIC8vIOWHj+WOu+mhtumDqOWvvOiIquagj+mrmOW6pjEwMAogICAgICAgICAgICAgICAgbGV0IHRvdGFsID0gdGFyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSAtIDEwMDsKICAgICAgICAgICAgICAgIGlmICgoZ2FwIDwgMCAmJiB0b3RhbCA+PSAwKSB8fCAoZ2FwID4gMCAmJiB0b3RhbCA8PSAwKSkgewogICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcikKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLnRpbWVFbmQoJ+aWh+eroOWvvOiIqui3s+i9rOiAl+aXtu+8micpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnNjcm9sbFRvKDAsIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICsgZ2FwKQogICAgICAgICAgICB9LCB0aGlzLnNwZWVkKQogICAgICAgIH0sCiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuYXJ0aWNsZVNpZGViYXIgPSAkaFV0aWxzLmFydGljbGVTaWRlYmFyKQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgYXJyID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKTsKICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPT09IDMpCiAgICAgICAgICAgICAgICB0aGlzLmp1bXAoZGVjb2RlVVJJKGFyclthcnIubGVuZ3RoIC0gMV0pKQogICAgICAgIH0pCiAgICB9Cn0K"},{"version":3,"sources":["h-article-sidebar.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"h-article-sidebar.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"h-article-sidebar\">\r\n        <div class=\"sidebar-wrapper\" @click=\"move\">\r\n            <div class=\"list\">目录</div>\r\n            <div v-for=\"(n, i) in articleSidebar\" :key=\"i\"\r\n                 v-html=\"n.innerHTML\">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import {addClass, deleteClass, isClassname} from \"@/utils/dom\";\r\n\r\n    export default {\r\n        name: \"HArticleSidebar\",\r\n        data() {\r\n            return {\r\n                titles: [],\r\n                articleSidebar: [],\r\n                activeStep: 0,\r\n                speed: 1,\r\n            }\r\n        },\r\n        methods: {\r\n            move(event) {\r\n                if (event.target.nodeName === 'A') {\r\n                    this.jump(event.target.innerText)\r\n                    this.updateTitleActive(event.target.parentNode)\r\n                }\r\n            },\r\n            updateTitleActive(node) {\r\n                const TITLEACTIVE = 'title-active';\r\n                if (!this.titles.length) {\r\n                    const sidebar = document.getElementsByClassName('sidebar-wrapper')[0];\r\n                    this.titles = Array.from(sidebar.getElementsByTagName('div'));\r\n                }\r\n                this.titles.forEach(n => isClassname(n, TITLEACTIVE) && deleteClass(n, TITLEACTIVE))\r\n                addClass(node, TITLEACTIVE)\r\n            },\r\n            jump(id) {\r\n                let tar = document.getElementById('anchor-' + id)// 获取需要滚动的距离\r\n\r\n                const header = window.location.origin // http://localhost/8080\r\n                const path = window.location.hash.substring(1).split('#')[0] // 路由路径\r\n                const anchor = tar.parentNode.id // 锚点名称\r\n                window.location.href = `${header}/#${path}#${anchor}`\r\n\r\n                clearInterval(this.timer)\r\n                let gap = Math.abs(tar.getBoundingClientRect().bottom) / 255;\r\n                // getBoundingClientRect() 可以找到当前元素位于浏览器视口的绝对定位距离\r\n                tar.getBoundingClientRect().bottom < 0 && (gap = -gap);\r\n                clearInterval(this.timer)\r\n                console.time('文章导航跳转耗时：')\r\n                this.timer = setInterval(_ => {\r\n                    // 减去顶部导航栏高度100\r\n                    let total = tar.getBoundingClientRect().bottom - 100;\r\n                    if ((gap < 0 && total >= 0) || (gap > 0 && total <= 0)) {\r\n                        clearInterval(this.timer)\r\n                        console.timeEnd('文章导航跳转耗时：')\r\n                    }\r\n                    document.body.scrollTo(0, document.body.scrollTop + gap)\r\n                }, this.speed)\r\n            },\r\n        },\r\n        mounted() {\r\n            setTimeout(() => this.articleSidebar = $hUtils.articleSidebar)\r\n            this.$nextTick(() => {\r\n                const arr = window.location.href.split('#');\r\n                if (arr.length === 3)\r\n                    this.jump(decodeURI(arr[arr.length - 1]))\r\n            })\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\r\n  .h-article-sidebar {\r\n    position: absolute;\r\n    width: 15em;\r\n    top: 20em;\r\n    padding: 10px 10px;\r\n    background-color: rgba(255, 255, 255, 0.5);\r\n    z-index: 99;\r\n    max-height: 400px;\r\n    overflow-y: auto;\r\n    right: 1em;\r\n  }\r\n\r\n  .h-article-sidebar2 {\r\n    position: fixed !important;\r\n    top: 3em !important;\r\n  }\r\n</style>"]}]}